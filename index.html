<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Mixed Integer Optimization for Metabolism"><meta name=author content="Pablo Rodriguez-Mier"><link href=https://metexplore.github.io/miom/ rel=canonical><link rel=icon href=assets/images/favicon.png><meta name=generator content="mkdocs-1.2.2, mkdocs-material-7.2.4"><title>MIOM</title><link rel=stylesheet href=assets/stylesheets/main.f7f47774.min.css><link rel=stylesheet href=assets/stylesheets/palette.3f5d1f46.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=assets/_mkdocstrings.css><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5SV6WE1KMZ"),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof location$&&location$.subscribe(function(t){gtag("config","G-5SV6WE1KMZ",{page_path:t.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-5SV6WE1KMZ"></script><link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <script>function __prefix(e){return new URL(".",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#introduction class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=. title=MIOM class="md-header__button md-logo" aria-label=MIOM data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> MIOM </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Introduction </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://www.github.com/metexplore/miom title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> miom </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=. title=MIOM class="md-nav__button md-logo" aria-label=MIOM data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> MIOM </label> <div class=md-nav__source> <a href=https://www.github.com/metexplore/miom title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> miom </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Introduction <span class="md-nav__icon md-icon"></span> </label> <a href=. class="md-nav__link md-nav__link--active"> Introduction </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#installation class=md-nav__link> Installation </a> <nav class=md-nav aria-label=Installation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#minimal-install class=md-nav__link> Minimal install </a> </li> <li class=md-nav__item> <a href=#full-install class=md-nav__link> Full install </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#quick-start class=md-nav__link> Quick start </a> </li> <li class=md-nav__item> <a href=#advantages class=md-nav__link> Advantages </a> </li> <li class=md-nav__item> <a href=#documentation class=md-nav__link> Documentation </a> </li> <li class=md-nav__item> <a href=#how-to-cite class=md-nav__link> How to cite </a> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> License </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Examples <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Examples data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=examples/fastcore/ class=md-nav__link> Exact Fastcore (MIP) </a> </li> <li class=md-nav__item> <a href=examples/fba/ class=md-nav__link> Flux Balance Analysis (LP) </a> </li> <li class=md-nav__item> <a href=examples/imat/ class=md-nav__link> iMAT: Integrative Metabolic Analysis Tool (MIP) </a> </li> <li class=md-nav__item> <a href=examples/sparse_fba/ class=md-nav__link> Sparse FBA (MIP) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=References data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=references/mio/ class=md-nav__link> mio.py </a> </li> <li class=md-nav__item> <a href=references/miom/ class=md-nav__link> miom.py </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#installation class=md-nav__link> Installation </a> <nav class=md-nav aria-label=Installation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#minimal-install class=md-nav__link> Minimal install </a> </li> <li class=md-nav__item> <a href=#full-install class=md-nav__link> Full install </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#quick-start class=md-nav__link> Quick start </a> </li> <li class=md-nav__item> <a href=#advantages class=md-nav__link> Advantages </a> </li> <li class=md-nav__item> <a href=#documentation class=md-nav__link> Documentation </a> </li> <li class=md-nav__item> <a href=#how-to-cite class=md-nav__link> How to cite </a> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> License </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=introduction>Introduction</h1> <p><a href="https://colab.research.google.com/drive/1JAOEHLlRCW8GziIpBqkFwJL2ha3OEOWJ?usp=sharing"><img alt="Try It Online" src=https://colab.research.google.com/assets/colab-badge.svg></a> <a href=https://badge.fury.io/py/miom><img alt="PyPI version" src=https://badge.fury.io/py/miom.svg></a> <img alt=Tests src=https://github.com/metexplore/miom/actions/workflows/unit-tests.yml/badge.svg></p> <p><strong>MIOM</strong> (Mixed Integer Optimization for Metabolism) is a python library for creating and solving complex optimization problems using genome-scale metabolic networks, in just a few lines. </p> <p>MIOM offers a high-level API that leverages the power of modern Mixed Integer Optimization (MIO) solvers to easily define steady-state metabolic optimization problems, from simple Flux Balance Analysis (FBA) simulations, to more complex problems, such as sparse FBA or context-specific reconstruction problems, and solve them the <strong>required level of optimality</strong>.</p> <p>MIOM uses the <a href=https://picos-api.gitlab.io/picos/ >PICOS</a> and the <a href=https://www.python-mip.com/ >Python-MIP</a> libraries to build and solve the optimization problems using many commercial, academic and free solvers. It is also compatible and complementary to <a href=https://opencobra.github.io/cobrapy/ >cobrapy</a>.</p> <p>Here is an example of how to implement FBA and Sparse FBA to maximize flux through the biomass reaction in the Recon3D model with MIOM:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>miom</span>

<span class=n>model</span> <span class=o>=</span> <span class=p>(</span><span class=n>miom</span>
        <span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s1>&#39;@BiGG/Recon3D.miom&#39;</span><span class=p>)</span>
        <span class=o>.</span><span class=n>steady_state</span><span class=p>()</span>
        <span class=o>.</span><span class=n>set_rxn_objective</span><span class=p>(</span><span class=s1>&#39;biomass_reaction&#39;</span><span class=p>)</span>
        <span class=o>.</span><span class=n>solve</span><span class=p>(</span><span class=n>verbosity</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>

<span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Optimal flux:&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>.</span><span class=n>get_fluxes</span><span class=p>(</span><span class=s1>&#39;biomass_reaction&#39;</span><span class=p>))</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Number of active reactions:&quot;</span><span class=p>,</span> <span class=nb>sum</span><span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=n>model</span><span class=o>.</span><span class=n>get_fluxes</span><span class=p>())</span> <span class=o>&gt;</span> <span class=mf>1e-8</span><span class=p>))</span>

<span class=c1># Minimize the number of reactions preserving the optimal flux</span>
<span class=n>V</span><span class=p>,</span> <span class=n>X</span> <span class=o>=</span> <span class=p>(</span><span class=n>model</span>
        <span class=o>.</span><span class=n>setup</span><span class=p>(</span><span class=n>opt_tol</span><span class=o>=</span><span class=mf>0.05</span><span class=p>)</span>
        <span class=o>.</span><span class=n>set_fluxes_for</span><span class=p>(</span><span class=s1>&#39;biomass_reaction&#39;</span><span class=p>)</span>
        <span class=o>.</span><span class=n>subset_selection</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
        <span class=o>.</span><span class=n>solve</span><span class=p>(</span><span class=n>verbosity</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
        <span class=o>.</span><span class=n>get_values</span><span class=p>())</span>

<span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Number of active reactions:&quot;</span><span class=p>,</span> <span class=nb>sum</span><span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=n>V</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mf>1e-8</span><span class=p>))</span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>This library is functional but still in a very early stage. API is still not stable and might be changed in future versions.</p> </div> <h2 id=installation>Installation</h2> <h3 id=minimal-install>Minimal install</h3> <p>By default, MIOM comes with support for COIN-OR CBC solver and GLPK using the swiglpk wrapper. To install MIOM with minimal dependencies, run:</p> <div class=highlight><pre><span></span><code>pip install miom
</code></pre></div> <h3 id=full-install>Full install</h3> <p>The full install option of <code>miom</code> comes also with the interfaces for <a href=https://www.gurobi.com/downloads>Gurobi</a> and <a href=https://www.mosek.com/downloads/ >Mosek</a>. Also, in order to be able to import metabolic networks in different formats (SBML, Matlab, YAML, etc), you need to install the additional <code>cobra</code> and <code>scipy</code> packages:</p> <div class=highlight><pre><span></span><code>pip install miom[all] cobra scipy
</code></pre></div> <p>CPLEX is also supported, but requires a valid license. To install MIOM with CPLEX support, follow the instructions on the <a href="https://www.ibm.com/docs/en/icos/12.8.0.0?topic=cplex-setting-up-python-api">CPLEX page</a> to install your current version of cplex in your python environment.</p> <h2 id=quick-start>Quick start</h2> <p>The first step is to import a GEM (a genome-scale model) using the <code>miom.mio.load_gem</code> method. The method accepts a local file or an URL. SBML files and Matlab files are supported through <code>cobra</code> and <code>scipy</code> packages. Please make sure that these packages are correctly installed before trying to import models in these formats (see <a href=#full-install>Full install</a>).</p> <p>Once these packages are available, you can import a model using:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>miom</span>
<span class=n>network</span> <span class=o>=</span> <span class=n>miom</span><span class=o>.</span><span class=n>mio</span><span class=o>.</span><span class=n>load_gem</span><span class=p>(</span><span class=s2>&quot;https://github.com/SysBioChalmers/Human-GEM/raw/main/model/Human-GEM.mat&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Number of reactions in the network&quot;</span><span class=p>,</span> <span class=n>network</span><span class=o>.</span><span class=n>num_reactions</span><span class=p>)</span>
</code></pre></div> <p>MIOM includes its own lightweight and portable format (.miom) for loading and storing metabolic networks, which does not require any additional dependency. This models uses <code>numpy</code> compressed structured arrays to store the basic information of the metabolic networks required for performing simulations. This format is even smaller and more portable than the Matlab files. A repository of converted models is available at https://github.com/pablormier/miom-gems.</p> <p>To make things even easier, the method <code>load_gem</code> can import any model from this repository using the relative path, for example:</p> <div class=highlight><pre><span></span><code><span class=n>human1</span> <span class=o>=</span> <span class=n>miom</span><span class=o>.</span><span class=n>mio</span><span class=o>.</span><span class=n>load_gem</span><span class=p>(</span><span class=s2>&quot;@SysBioChalmers/Human-GEM.miom&quot;</span><span class=p>)</span>
<span class=n>recon3d</span> <span class=o>=</span> <span class=n>miom</span><span class=o>.</span><span class=n>mio</span><span class=o>.</span><span class=n>load_gem</span><span class=p>(</span><span class=s2>&quot;@BiGG/Human-GEM.miom&quot;</span><span class=p>)</span>
</code></pre></div> <p>Here is an example of how to load a metabolic network and maximize the flux through a target reaction using FBA, and then how to modify the original problem to implement the sparse FBA problem adding only a few lines to the original problem:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>miom</span>

<span class=n>network</span> <span class=o>=</span> <span class=n>miom</span><span class=o>.</span><span class=n>mio</span><span class=o>.</span><span class=n>load_gem</span><span class=p>(</span><span class=s2>&quot;@mus_musculus_iMM1865.miom&quot;</span><span class=p>)</span>
<span class=n>target_rxn</span> <span class=o>=</span> <span class=s2>&quot;BIOMASS_reaction&quot;</span>

<span class=c1># Create the optimization problem with miom and solve</span>
<span class=n>model</span> <span class=o>=</span> <span class=p>(</span><span class=n>miom</span>
        <span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>network</span><span class=p>)</span>
        <span class=o>.</span><span class=n>steady_state</span><span class=p>()</span>
        <span class=o>.</span><span class=n>set_rxn_objective</span><span class=p>(</span><span class=n>target_rxn</span><span class=p>)</span>
        <span class=o>.</span><span class=n>solve</span><span class=p>(</span><span class=n>verbosity</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>

<span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Optimal flux:&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>.</span><span class=n>get_fluxes</span><span class=p>(</span><span class=n>target_rxn</span><span class=p>),</span> <span class=s2>&quot;mmol/(h·gDW)&quot;</span><span class=p>)</span>

<span class=c1># Show reactions with non-zero flux</span>
<span class=n>V</span><span class=p>,</span> <span class=n>X</span> <span class=o>=</span> <span class=n>model</span><span class=o>.</span><span class=n>get_values</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Number of reactions active reactions:&quot;</span><span class=p>,</span> <span class=nb>sum</span><span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=n>V</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mf>1e-8</span><span class=p>))</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Optimal flux: 798.8110517749975 mmol/(h·gDW)
Number of active reactions: 2549
</code></pre></div> <p>Now, modify the original problem to solve the sparse FBA problem, minimizing the number of reactions with non-zero flux that can lead to the optimal possible flux through the target reaction. This can be easily done by transforming the FBA problem into a subset selection problem, where each reaction has a negative weight and the goal is to remove as many negative weighted reactions as possible. Note that since each reaction has the same weight (-1), all reactions are equally important in the optimization problem:</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>To better understand the meaning of each step, please read the documentation of the <a href=https://metexplore.github.io/miom/references/miom/#miom.miom.BaseModel>BaseModel class</a>, and the complete example in <a href=https://metexplore.github.io/miom/examples/sparse_fba>examples/sparse_fba.py</a>. </p> </div> <div class=highlight><pre><span></span><code><span class=n>V</span><span class=p>,</span> <span class=n>X</span> <span class=o>=</span> <span class=p>(</span><span class=n>model</span>
        <span class=c1># Set the MIP Gap tolerance to 5%, using the default solver</span>
        <span class=c1># (COIN-OR CBC included with the Python-MIP lib)</span>
        <span class=o>.</span><span class=n>setup</span><span class=p>(</span><span class=n>opt_tol</span><span class=o>=</span><span class=mf>0.05</span><span class=p>,</span> <span class=n>verbosity</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
        <span class=c1># Set the fluxes to the optimal value found</span>
        <span class=o>.</span><span class=n>set_fluxes_for</span><span class=p>(</span><span class=s1>&#39;BIOMASS_reaction&#39;</span><span class=p>)</span>
        <span class=c1># Transform to a subset selection problem</span>
        <span class=c1># adding a negative weight to all reactions</span>
        <span class=c1># (to remove them from the final solution)</span>
        <span class=o>.</span><span class=n>subset_selection</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
        <span class=c1># Solve the MIO problem</span>
        <span class=o>.</span><span class=n>solve</span><span class=p>()</span>
        <span class=c1># Get continuos vars (fluxes) and binary vars</span>
        <span class=o>.</span><span class=n>get_values</span><span class=p>())</span>

<span class=c1># Show reactions with non-zero flux</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Number of active reactions:&quot;</span><span class=p>,</span> <span class=nb>sum</span><span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=n>V</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mf>1e-8</span><span class=p>))</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Number of active reactions: 404
</code></pre></div> <p>Solving this problem with default COIN-OR CBC solver returns a solution with 404 active reactions (much less than the 2549 reactions obtained with FBA, and less than the 433 reactions returned by the CappedL1 approximation in the <a href=https://opencobra.github.io/cobratoolbox/stable/modules/analysis/sparseFBA/index.html>sparseFBA</a> implementation in Matlab), with a relative gap between the lower and upper objective bound below 5% (as indicated in the setup method):</p> <div class=highlight><pre><span></span><code>Cbc0011I Exiting as integer gap of 122.04538 less than 1e-10 or 5%
Cbc0001I Search completed - best objective -10208, took 0 iterations and 0 nodes (28.34 seconds)
Cbc0035I Maximum depth 0, 0 variables fixed on reduced cost
Total time (CPU seconds):       60.79   (Wallclock seconds):       60.79
</code></pre></div> <p>The concise API provided by MIOM makes everything explicit: the sparse FBA problem can be implemented as a best subset selection problem of reactions (minimize the number of reactions with non-zero flux) subject to the steady-state constraint and the optimality constraint of the flux for the target reaction (in this case the <code>BIOMASS_reaction</code>). Using this formulation, you can take advantage of modern solvers like CPLEX, GUROBI, MOSEK, COIN-OR CBC (among others) to obtain an optimal or an approximate solution, controlled by the <code>opt_tol</code> parameter.</p> <p>To use other solvers, you only need to provide the specific solver to the <code>miom</code> method, for example:</p> <div class=highlight><pre><span></span><code><span class=n>model</span> <span class=o>=</span> <span class=p>(</span><span class=n>miom</span>
        <span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s1>&#39;@BiGG/Recon3D.miom&#39;</span><span class=p>,</span> <span class=n>solver</span><span class=o>=</span><span class=n>miom</span><span class=o>.</span><span class=n>Solvers</span><span class=o>.</span><span class=n>GLPK</span><span class=p>)</span>
        <span class=o>.</span><span class=n>steady_state</span><span class=p>()</span>
        <span class=o>.</span><span class=n>set_rxn_objective</span><span class=p>(</span><span class=s1>&#39;biomass_reaction&#39;</span><span class=p>)</span>
        <span class=o>.</span><span class=n>solve</span><span class=p>(</span><span class=n>verbosity</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>
</code></pre></div> <h2 id=advantages>Advantages</h2> <ul> <li><strong>It's easy to use:</strong> MIOM uses the <a href=https://picos-api.gitlab.io/picos/ >PICOS</a> and the <a href=https://www.python-mip.com/ >Python-MIP</a> libraries, which means you can use any solver supported by those libraries.</li> <li><strong>It's easy to extend:</strong> MIOM is written in pure python, so you can easily extend it to solve more complex optimization problems.</li> <li><strong>It makes the problem explicit:</strong> MIOM uses a declarative way to express the problem, so you can easily read and understand what you are solving and differences between algorithms.</li> <li><strong>It's fast:</strong> MIOM leverages the power of MIO solvers to solve complex optimization problems. You can control the quality and speed of the solutions for your problem and get better solutions that the approximations (LP) of the original problem available in other constraint-based modeling libraries.</li> <li><strong>It's lightweight:</strong> The library has a small number of dependencies, so it's easy to install and distribute also in HPC environments.</li> <li><strong>It includes a compressed GEM format</strong>: MIOM can load and save the minimal information of the metabolic networks required for performing simulations into a compressed file compatible with numpy. The small size of the files allows you to quickly run online experiments so other people can reproduce your results. It also supports SBML and matlab formats if <code>cobratoolbox</code> is installed.</li> <li><strong>It's open-source:</strong> MIOM is open-source and free to use. You can contribute to the development of MIOM by forking the repository and sending pull requests.</li> </ul> <h2 id=documentation>Documentation</h2> <p>The documentation of the library can be found at https://metexplore.github.io/miom/</p> <h2 id=how-to-cite>How to cite</h2> <p>Manuscript in progress</p> <h2 id=license>License</h2> <p>GNU General Public License v3.0</p> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=examples/fastcore/ class="md-footer__link md-footer__link--next" aria-label="Next: Exact Fastcore (MIP)" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Exact Fastcore (MIP) </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2021 INRAE Toxalim </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": ["navigation.instant"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.709b4209.min.js", "version": {"provider": "mike"}}</script> <script src=assets/javascripts/bundle.febc23d1.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js data-cfasync=false></script> <script>
		window.cookieconsent.initialise({
			"palette": {
			"popup": {
				"background": "#edeff5",
				"text": "#838391"
			},
			"button": {
				"background": "#4b81e8"
			}
			}
		});
	</script> </body> </html>